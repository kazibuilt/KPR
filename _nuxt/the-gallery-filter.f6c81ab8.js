import e from"./btn-close.617c7166.js";import l from"./the-gallery-filter-search.dd25302b.js";import s from"./the-gallery-filter-trait.911772a8.js";import t from"./the-gallery-filter-submit.e2da6326.js";import{f as r,e as a,b as i,r as o,h as n,E as u,o as c,l as f,m as p,q as m,G as v,u as d,F as h,p as b,c as y,w as j,v as g,t as k,A as F,B as _,C}from"./entry.40e762a9.js";import"./gozer-env.ed057cb2.js";import{u as O}from"./gallery-store.7012f5b9.js";import"./hover-sfx.01594b28.js";import"./close-stroke.cb61bb4d.js";import"./shape-rounded-outline.626c233f.js";import"./button-base.f7922683.js";import"./wallet-store.d6533bc0.js";import"./index.77e4f8bb.js";import"./the-gallery-filter-trait-value.5a05b147.js";import"./checkbox.d66717ad.js";const x={class:"inner"},I=(e=>(_("data-v-93ebb7b3"),e=e(),C(),e))((()=>p("h3",{class:"title type-h2"},"Filters",-1))),A=r({__name:"the-gallery-filter",props:{isOverlay:{default:!1},category:{default:"default"},visible:{default:!1}},emits:["onClose"],setup(r,{expose:_,emit:C}){const A=r;a(),i();const E=O(),D=o(null),w=o([]),B=o(!1),M=[],S=o([]),q=n((()=>A.isOverlay&&(Math.abs(S.value.length)>0||B.value))),z=n((()=>E.traits)),G=o(!1),N=n((()=>"my"===A.category));u((()=>{var e;return null==(e=E.search)?void 0:e.appliedFilters}),(e=>{var l;A.isOverlay&&(S.value=null==(l=E.search)?void 0:l.appliedFilters.filter((e=>!M.includes(e))).filter((e=>e.trait||e.token&&-1!==e.token)))})),u((()=>A.category),(e=>{w.value.forEach((e=>e.close()))}));const R=()=>{S.value.forEach((e=>{var l;null==(l=E.search)||l.clearFilter(e)})),A.isOverlay&&C("onClose")},T=e=>{var l,s,t,r;if(e.length){const r=parseInt(e),a=null==(l=E.search)?void 0:l.getTokenDetail(r);let i=-1;a&&(i=parseInt(a.id)),null==(s=E.search)||s.removeAllFilters(),null==(t=E.search)||t.applyFilter({type:"token",token:i}),a?R():B.value=!0}else null==(r=E.search)||r.removeAllFilters(),B.value=!1};return _({clearInput:()=>{D.value.clear()}}),(a,i)=>{const o=e,n=l,u=s,_=t;return c(),f("div",{class:v(["galleryFilter",{fullyDisabled:d(N),visible:r.visible}])},[p("div",x,[m(o,{class:"btnClose",onClick:R}),I,m(n,{ref_key:"refSearch",ref:D,class:"search",onOnSubmit:T},null,512),p("ul",{class:v(["list",{isDisabled:d(G)}])},[(c(!0),f(h,null,b(d(z),(e=>(c(),y(u,{trait:e,key:e.name,ref_for:!0,ref_key:"refItems",ref:w},null,8,["trait"])))),128))],2)]),d(q)?(c(),y(_,{key:0,class:"submitBtn",disabled:d(B),onOnClose:i[0]||(i[0]=e=>C("onClose"))},{default:j((()=>[g(k(d(B)?"No results found":"Apply Filters"),1)])),_:1},8,["disabled"])):F("",!0)],2)}}},[["__scopeId","data-v-93ebb7b3"]]);export{A as default};
