import{a as e,e as a,h as l,r as t,E as i,j as o,I as r,Z as u,P as s,y as n,o as v,l as d,u as p,z as c,U as f,A as m,f as y}from"./entry.40e762a9.js";const g=["src","alt","copyright"],b=["src","alt","copyright"],h=y(e({__name:"media",props:{blok:{type:Object},path:{}},emits:["loaded"],setup(e,{emit:y}){const h=e,{app:k,browser:w,debug:j,storyblok:$}=a(),_=l((()=>{let e=h.blok;return Array.isArray(h.blok)&&(e=h.blok[0]),e})),x=l((()=>{var e,a,l,t,i;return w.isMobile&&(null==(a=null==(e=_.value)?void 0:e.mobile)?void 0:a.filename)?null==(l=_.value)?void 0:l.mobile:(null==(t=_.value)?void 0:t.desktop)?null==(i=_.value)?void 0:i.desktop:void 0})),M=t(null);i((()=>[x.value,w.breakpoint,h.path]),(()=>{var e;M.value=h.path||(null==(e=x.value)?void 0:e.filename)}),{immediate:!0});const A=l((()=>M.value?M.value.split(/[#?]/)[0].split(".").pop().trim():null)),O=l((()=>{if(["mp4","webm","m3u8","mpd"].indexOf(A.value)>=0)return"video";return["jpg","jpeg","jfif","pjpeg","pjp","gif","png","webp","tif","tiff","apng","avif","svg","bmp","ico"].indexOf(A.value)>=0?"img":null})),R=l((()=>{if("img"===O.value){if(!C.value)return"";if("svg"==A.value)return M.value;let e=window.devicePixelRatio||1;e=Math.max(e,1),e=Math.min(e,w.isDesktop?1.5:3),e=Math.floor(e);let a=P.value*e,l=q.value*e,t=1;return a>2560&&(t=2560/a,a*=t,l*=t),a=Math.ceil(a),l=Math.ceil(l),0==a&&0==l?null:`${M.value}/m/${a}x${l}/smart/filters:quality(85)`}return M.value})),C=t(null),E=t(null),I=t(null),P=t(0),q=t(0),z=async function(){await u(),P.value=I.value.offsetWidth,q.value=I.value.offsetHeight};o(z),r(z),o((async()=>{var e;switch(C.value=!0,await u(),O.value){case"img":(null==(e=E.value)?void 0:e.complete)&&y("loaded");break;case"video":(async()=>{var e;await u(),null==(e=E.value)||e.play()})();break;case"lottie":break;default:y("loaded")}})),s((()=>{O.value}));const D=t(!1),H=function(){var e;switch(D.value=!0,O.value){case"img":break;case"video":null==(e=E.value)||e.play()}y("loaded")};return(e,a)=>{var l,t;const i=n("editable");return v(),d("div",{class:"media-content",ref_key:"refContainer",ref:I},[p(R)&&"img"==p(O)?c((v(),d("img",f({class:"media",ref_key:"refRoot",ref:E,key:`img-${p(w).breakpoint}-${p(R)}`,src:p(R),alt:null==(l=p(x))?void 0:l.alt,copyright:null==(t=p(x))?void 0:t.copyright,onLoad:H,onError:H},e.$attrs),null,16,g)),[[i,p(_)]]):m("",!0),p(R)&&"video"==p(O)?c((v(),d("video",f({key:1,class:"media",ref_key:"refRoot",ref:E,src:p(R),alt:p(x).alt,copyright:p(x).copyright,onCanplay:H,loop:"false",autoplay:"true",playsinline:"true",muted:"true"},e.$attrs),null,16,b)),[[i,p(_)]]):m("",!0)],512)}}}),[["__scopeId","data-v-89abdc38"]]);export{h as default};
