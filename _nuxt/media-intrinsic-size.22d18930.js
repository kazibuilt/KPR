import{a as e,e as a,b as t,r as s,j as i,I as l,o,l as n,z as r,M as u,u as d,m as c,A as v,s as f,f as h}from"./entry.40e762a9.js";import{c as m,a as p}from"./intrinsic-scale.es-modules.1631ed54.js";const y=["src"],w=["src","poster"],g=h(e({__name:"media-intrinsic-size",props:{src:{required:!0},poster:{required:!0},fit:{default:"contain"},isVideo:{default:!1}},emits:["loaded"],setup(e,{emit:h}){const g=e;a(),t();const _=s(null),k=s(null),V=s(null),j=s(null),z=s(null),H=s(null),I=s(!1),W=async function(){var e,a;if(V.value=_.value.offsetWidth,j.value=_.value.offsetHeight,g.isVideo){const e=await function(e){return new Promise((a=>{const t=document.createElement("video");t.onloadedmetadata=()=>{a({width:t.videoWidth,height:t.videoHeight})},t.src=e}))}(g.src);z.value=e.width,H.value=e.height}else{const e=await(a=g.src,new Promise((e=>{const t=new Image;t.onload=()=>{e({width:t.naturalWidth,height:t.naturalHeight})},t.src=a})));z.value=e.width,H.value=e.height}let t;if("cover"===g.fit)t=p(V.value,j.value,z.value,H.value);else t=m(V.value,j.value,z.value,H.value);if(null==(e=k.value)?void 0:e.style){let e=Math.min(z.value,t.width);k.value.style.width=`${e}px`,k.value.style.left="50%",k.value.style.top="50%",k.value.style.transform="translate(-50%, -50%)",k.value.style.opacity=1}I.value=!0};return i((async()=>{await W(),h("loaded")})),l(W),(a,t)=>(o(),n("div",{class:"media-intrinsic-size",ref_key:"refRoot",ref:_},[r(c("div",{class:"container",ref_key:"refContainer",ref:k},[e.isVideo?v("",!0):(o(),n("img",{key:0,src:e.src},null,8,y)),e.isVideo?(o(),n("video",{key:1,src:e.src,poster:e.poster,muted:"true",autoplay:!0,playsinline:!0},null,8,w)):v("",!0),f(a.$slots,"info",{width:d(z),height:d(H)},void 0,!0)],512),[[u,d(I)]])],512))}}),[["__scopeId","data-v-d491e3fc"]]);export{g as default};
