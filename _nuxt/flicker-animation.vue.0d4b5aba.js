import{a as e,e as t,b as s,r,j as a,o as l,l as o,s as f}from"./entry.40e762a9.js";import{u as n}from"./useRaf.5395a270.js";import{u as p}from"./useScrollTrigger.934dab30.js";const u=e({__name:"flicker-animation",props:{scrollTrigger:{default:!1},flashOnMount:{default:!0},property:{default:"opacity"},states:{default:"0_100"},flashes:{default:11},speed:{default:1}},setup(e,{expose:u}){const i=e;t();const{$gsap:c,$ScrollTrigger:g}=s(),m=r(null);let d=0,y=0,h=!1,_=[];n((()=>{if(h){d++;const e=Math.floor(d/Math.min(i.speed))%_.length;m.value.style[i.property]=_[e],d>i.flashes&&(h=!1,m.value.style[i.property]=y)}})),a((()=>{_=i.states.split("_"),i.flashOnMount&&v()}));const v=function(){h||(d=0,y=m.value.style[i.property],h=!0)};return p((()=>{if(i.scrollTrigger)return g.create({trigger:refSpacer.value,start:"center bottom",onEnter:()=>{v()}})})),u({animate:v}),(e,t)=>(l(),o("div",{class:"flicker",ref_key:"refRoot",ref:m},[f(e.$slots,"default")],512))}});export{u as _};
