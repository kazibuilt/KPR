import e from"./media.20a994eb.js";import a from"./dot-caption.f385565b.js";import{a as t,e as s,b as l,h as i,r as o,K as r,j as n,Z as c,N as d,y as h,z as m,o as p,l as u,m as f,q as v,u as w,c as k,w as g,v as b,t as y,A as j,J as _,U as x,aD as $,f as H}from"./entry.40e762a9.js";import"./dot.36dd12fe.js";import"./hacky-text.bd3e68e0.js";import"./useScrollTrigger.934dab30.js";import"./link-hover.6073cf81.js";const W=H(t({__name:"media-image",props:{blok:{type:Object,required:!0},layer:{}},emits:["show","loaded"],setup(t,{emit:H}){const W=t,{app:q,browser:A}=s();l();const C=i((()=>{if(W.blok.title)return W.blok.title;let e=W.blok.asset.filename.replace(/^.*[\\\/]/,"");return e=e.replace(/\.[^/.]+$/,""),e=e.replaceAll("-"," "),e=e.replaceAll("_"," "),e})),D=o(null);o(null);const I=r(D),K=o(null);n((async()=>{let e=W.blok.asset.filename,a=D.value.offsetWidth;a=Math.ceil(a),K.value=`${e}/m/${a}x0/smart/filters:quality(85)`;let t=await(s=K.value,new Promise((e=>{const a=new Image;a.onload=()=>{e(a)},a.src=s})));var s;M.width=t.naturalWidth,M.height=t.naturalHeight,J(),await c(),H("loaded")}));let M=d({width:1,height:1}),S=i((()=>M.height>M.width));const z=o(100),J=function(){var e;let a=S.value?40:80,t=S.value?60:100,s=$(a,t),l=M.width/M.height,i=(null==(e=D.value)?void 0:e.offsetWidth)||1,o=.82*A.windowHeight*l/i*100;s=Math.min(s,o),z.value=s};return(s,l)=>{const i=e,o=a,r=h("editable");return m((p(),u("div",x({class:"media-image",ref_key:"refRoot",ref:D},s.$attrs,{onClick:l[0]||(l[0]=e=>H("show")),class:[w(S)?"portrait":"landscape",t.blok.is_white?"isWhite":""]}),[f("div",{class:"scale",style:_({width:`${w(z)}%`})},[v(i,{class:"w-full",path:t.blok.asset.filename},null,8,["path"]),w(A).isDesktop?(p(),k(o,{key:0,class:"type-caption2",externalHovering:w(I)},{default:g((()=>[b(y(w(C)),1)])),_:1},8,["externalHovering"])):j("",!0)],4)],16)),[[r,t.blok]])}}}),[["__scopeId","data-v-2f941899"]]);export{W as default};
